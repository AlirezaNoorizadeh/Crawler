<style>
    body {
        font-family: Arial, sans-serif;
    }

    input[type="text"] {
        padding: 12px 20px;
        margin: 8px 0;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-radius: 15px;
    }

    [id^="main"] {
        background-color: #525252;
        margin-top: 15px;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 15px;
        margin-bottom: 30px;
    }

    button {
        transition: background-color 1s;
        border: 4px solid #45a049;
        background-color: #456446;
        color: white;
        padding: 14px 20px;
        margin: 8px 0;
        border-radius: 15px;
        cursor: pointer;
    }

    button:hover {
        background-color: #45a049;
    }

    button.remove {
        border: 4px solid rgb(219, 0, 0);
        background-color: #bb6b6b;
    }

    button.remove:hover {
        background-color: rgb(221, 0, 0);
    }

    div#Content {
        margin-top: 15px;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 15px;
    }

    code {
        display: block;
        white-space: pre-wrap;
        background-color: #f4f4f4;
        padding: 5px;
        margin-bottom: 10px;
        border-radius: 15px;
    }

    .contents {
        background-color: rgb(167, 167, 167);
        padding: 15px;
        border-radius: 8px;
    }

    ::-webkit-scrollbar {
        width: 12px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 8px;
    }

    ::-webkit-scrollbar-thumb {
        background: #45a049;
        border-radius: 8px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #007906;
    }

</style>


<div id="main">
    <div>
        <input type="text" id="urlInput0" placeholder="Enter website URL">
        <input type="text" id="tagInput0" placeholder="Enter tag to search">
        <button onclick="loadDoc(0)">Load</button>
        <div style="max-height: 300px; overflow: auto;" class="contents" id="Content0"></div>
    </div>
    <button onclick="addDiv()">Add</button>
    <button class="remove" onclick="removeDiv(event)">Remove</button>
</div>

<script>
let divCount = 0;

function addDiv() {
    divCount++;
    let newMainDiv = document.createElement("div");
    newMainDiv.id = "main" + divCount;
    let newDiv = document.createElement("div");
    newDiv.innerHTML = '<input type="text" id="urlInput' + divCount + '" placeholder="Enter website URL">' +
                  '<input type="text" id="tagInput' + divCount + '" placeholder="Enter tag to search">' +
                  '<button onclick="loadDoc(' + divCount + ')">Load</button>' +
                  '<div style="max-height: 300px; overflow: auto;" class="contents" id="Content' + divCount + '"></div>';
    newMainDiv.appendChild(newDiv);
    let addButton = document.createElement("button");
    addButton.innerText = "Add";
    addButton.onclick = addDiv;
    newMainDiv.appendChild(addButton);
    let removeButton = document.createElement("button");
    removeButton.innerText = "Remove";
    removeButton.classList.add("remove");
    removeButton.onclick = removeDiv;
    newMainDiv.appendChild(removeButton);
    document.body.appendChild(newMainDiv);
}


function removeDiv(event) {
    let divToRemove = event.target.parentElement;
    divToRemove.remove();
}

function isValidURL(url) {
    if (!/^https?:\/\//i.test(url)) {
        return false;
    }

    const domain = url.match(/^https?:\/\/(?:www\.)?([^/]+)/i)[1];
    const subdomains = domain.split('.');
    if (subdomains.length > 2) {
        return false;
    }

    return true;
}

function loadDoc(divNum) {
    const url = document.getElementById('urlInput' + divNum).value;
    const tagToSearch = document.getElementById('tagInput' + divNum).value;

    if (!isValidURL(url)) {
        alert("Please enter a valid URL.");
        return;
    }

    const xhttp = new XMLHttpRequest();
    xhttp.onload = function() {
        let content = document.createElement("div");
        content.innerHTML = this.responseText;

        let tags = content.querySelectorAll(tagToSearch);
        let listContainer = document.getElementById('Content' + divNum);

        listContainer.innerHTML = "";

        if (tags.length === 0) {
            alert("No matching tags found.");
            return;
        }

        tags.forEach(tag => {
            let codeElement = document.createElement("code");
            codeElement.innerText = tag.outerHTML;
            let tagDiv = document.createElement("div");
            tagDiv.appendChild(codeElement);
            listContainer.appendChild(tagDiv);
        });
    };
    xhttp.open("GET", url, true);
    xhttp.send();
}

</script>