<div>
    <input type="text" id="urlInput0" placeholder="Enter website URL">
    <input type="text" id="tagInput0" placeholder="Enter tag to search">
    <button onclick="loadDoc(0)">Load</button>
    <div id="Content0"></div>
</div>
<button onclick="addDiv()">Add</button>
<button onclick="removeDiv()">Remove</button>

<script>
let divCount = 0;

function addDiv() {
    divCount++;
    let newDiv = document.createElement("div");
    newDiv.innerHTML = `<input type="text" id="urlInput${divCount}" placeholder="Enter website URL">
                        <input type="text" id="tagInput${divCount}" placeholder="Enter tag to search">
                        <button onclick="loadDoc(${divCount})">Load</button>
                        <div id="Content${divCount}"></div>
                        <button onclick="addDiv()">Add</button>
                        <button onclick="removeDiv()">Remove</button>`;
    document.body.appendChild(newDiv);
}

function isValidURL(url) {
    if (!/^https?:\/\//i.test(url)) {
        return false;
    }

    const domain = url.match(/^https?:\/\/(?:www\.)?([^/]+)/i)[1];
    const subdomains = domain.split('.');
    if (subdomains.length > 2) {
        return false;
    }

    return true;
}

function loadDoc(divNum) {
    const url = document.getElementById(`urlInput${divNum}`).value;
    const tagToSearch = document.getElementById(`tagInput${divNum}`).value;

    if (!isValidURL(url)) {
        alert("Please enter a valid URL.");
        return;
    }

    const xhttp = new XMLHttpRequest();
    xhttp.onload = function() {
        let content = document.createElement("div");
        content.innerHTML = this.responseText;

        let tags = content.querySelectorAll(tagToSearch);
        let listContainer = document.getElementById(`Content${divNum}`);

        listContainer.innerHTML = "";

        if (tags.length === 0) {
            alert("No matching tags found.");
            return;
        }

        tags.forEach(tag => {
            let codeElement = document.createElement("code");
            codeElement.innerText = tag.outerHTML;
            let tagDiv = document.createElement("div");
            tagDiv.appendChild(codeElement);
            listContainer.appendChild(tagDiv);
        });
    };
    xhttp.open("GET", url, true);
    xhttp.send();
}
</script>
