<div id="container">
    <div>
        <input type="text" id="urlInput" placeholder="Enter website URL">
        <input type="text" id="tagInput" placeholder="Enter tag to search">
        <button onclick="loadDoc()">Load</button>
    </div>

    <div id="poets"></div>

    <div id="additionalDivs"></div>

    <div>
        <button onclick="addDiv()">Add</button>
        <button onclick="removeDiv()">Remove</button>
    </div>
</div>

<script>
function isValidURL(url) {
    // Check if the URL starts with "http://" or "https://"
    if (!/^https?:\/\//i.test(url)) {
        return false;
    }

    // Check for subdomains
    const domain = url.match(/^https?:\/\/(?:www\.)?([^/]+)/i)[1];
    const subdomains = domain.split('.');
    if (subdomains.length > 2) {
        return false;
    }

    return true;
}
function addDiv() {
    let additionalDivsContainer = document.getElementById("additionalDivs");

    let div = document.createElement("div");
    let input1 = document.createElement("input");
    input1.type = "text";
    input1.placeholder = "Enter website URL";

    let input2 = document.createElement("input");
    input2.type = "text";
    input2.placeholder = "Enter tag to search";

    let button = document.createElement("button");
    button.innerText = "Load";
    button.onclick = function() {
        // Call the loadDoc function with the provided inputs
        loadDoc(input1.value, input2.value);
    };

    let outputDiv = document.createElement("div"); // Create a div for displaying the output

    div.appendChild(input1);
    div.appendChild(input2);
    div.appendChild(button);
    div.appendChild(outputDiv); // Append the output div to the dynamically created div

    additionalDivsContainer.appendChild(div);
}

function loadDoc(url, tagToSearch) {
    // Validate the URL
    if (!isValidURL(url)) {
        alert("Please enter a valid URL.");
        return;
    }

    const xhttp = new XMLHttpRequest();
    xhttp.onload = function() {
        let content = document.createElement("div");
        content.innerHTML = this.responseText;

        let tags = content.querySelectorAll(tagToSearch);
        let poetsContainer = document.getElementById("poets");

        // Clear existing content before displaying new results
        poetsContainer.innerHTML = "";

        if (tags.length === 0) {
            alert("No matching tags found.");
            return;
        }

        tags.forEach(tag => {
            let codeElement = document.createElement("code");
            codeElement.innerText = tag.outerHTML;
            let tagDiv = document.createElement("div");
            tagDiv.appendChild(codeElement);
            poetsContainer.appendChild(tagDiv);
        });

        let outputText = "Found " + tags.length + " matching tags."; // Prepare the output text
        let outputDiv = document.getElementById("output-" + url); // Get the output div based on the URL

        if (!outputDiv) {
            // Create the output div if it doesn't exist
            outputDiv = document.createElement("div");
            outputDiv.id = "output-" + url;
            outputDiv.className = "output";
            document.getElementById("additionalDivs").appendChild(outputDiv);
        }

        outputDiv.innerText = outputText; // Display the output text in the output div
    };
    xhttp.open("GET", url, true);
    xhttp.send();
}
